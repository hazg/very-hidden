{"version":3,"file":"register-5ff3bcd8.js","sources":["../../app/javascript/pages/register.svelte"],"sourcesContent":["<script>\nimport { User } from \"../store/user\";\n// TODO: Change to original package, after commit pull request https://github.com/hazg/svelte-toast/pull/2\nimport { Form, Field, Select } from \"sveltestrap-forms-lib\";\nimport { SvelteToast, toast } from 'svelte-toast'\nimport { FormGroup, Input} from \"sveltestrap\"\nimport { _ } from 'svelte-i18n'\n\nlet email, password, passwordConfirmation\n\nlet csrf = document.querySelector('meta[name=csrf-token]').content\nlet param = document.querySelector('meta[name=csrf-param]').content\n\nasync function formSubmit(data){\n  let res = await User.register(email, password, passwordConfirmation)\n  if(res.errors){\n    toast.push(res.errors.join('<br />'))\n  }else{\n    User.signIn(res.token)\n    toast.push('Вы зарегистрировались '+res.data['email'])\n    window.location = '/'\n  }\n}\n\n</script>\n\n<form method='post' action=\"/api/v1/auth/register\">\n  <FormGroup>\n    <Input placeholder=\"Почта\" type=\"email\" name=\"email\" bind:value={email} />\n    <Input placeholder=\"Пароль\" type=\"password\" name=\"password\" autocomplete=\"on\" bind:value={password} />\n    <Input placeholder=\"Еще раз\" type=\"password\" name=\"password_confirmation\" autocomplete=\"on\" bind:value={passwordConfirmation} />\n\n    <Input type=\"hidden\" name=\"authenticity_token\" bind:value={csrf} />\n  </FormGroup>\n\n  <button on:click|preventDefault={formSubmit} class=\"btn btn-secondary\">\n    {$_('register')}\n  </button>\n  <SvelteToast />\n</form>"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;eA4BqE,GAAK;iCAAL,GAAK;;;;;;;;;;;;;;;;;kBACoB,GAAQ;oCAAR,GAAQ;;;;;;;;;;;;;;;;;8BACM,GAAoB;gDAApB,GAAoB;;;;;;;;;;;;;;;cAEjE,GAAI;gCAAJ,GAAI;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;qCAJE,GAAK;;;;;;;;;wCACoB,GAAQ;;;;;;;;;oDACM,GAAoB;;;;;;;;;oCAEjE,GAAI;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;uBAI9D,GAAE,IAAC,UAAU;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;yEADiB,GAAU;;;;;;;;;;;;0EACxC,GAAE,IAAC,UAAU;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;KA5Bd,KAAK,EAAE,QAAQ,EAAE,oBAAA;KAEjB,IAAI,GAAG,QAAQ,CAAC,aAAa,CAAC,uBAAuB,EAAE,OAAA;KACvD,KAAK,GAAG,QAAQ,CAAC,aAAa,CAAC,uBAAuB,EAAE,OAAA;;gBAE7C,UAAU,CAAC,IAAI;MACxB,GAAG,SAAS,IAAI,CAAC,QAAQ,CAAC,KAAK,EAAE,QAAQ,EAAE,oBAAoB;;MAChE,GAAG,CAAC,MAAM;GACX,KAAK,CAAC,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,IAAI,CAAC,QAAQ;;GAEnC,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,KAAK;GACrB,KAAK,CAAC,IAAI,CAAC,wBAAwB,GAAC,GAAG,CAAC,IAAI,CAAC,OAAO;GACpD,MAAM,CAAC,QAAQ,GAAG,GAAE;;;;;;;;;;;EAQ6C,KAAK;;;;;EACoB,QAAQ;;;;;EACM,oBAAoB;;;;;EAEjE,IAAI;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}
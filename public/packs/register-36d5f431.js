import{S as e,i as t,s as n,v as a,e as s,o,w as r,x as u,d as c,p as $,y as l,l as m,z as p,t as i,f,h as d,q as g,A as v,B as h,C as w,U as y,D as x}from"./bundle.js";import{F as b,I as k}from"./Input-af104151.js";function j(e){let t,n,a,s,u,l,m,p,y,x,b,j;function q(t){e[5](t)}let I={placeholder:"Почта",type:"email",name:"email"};function S(t){e[6](t)}void 0!==e[0]&&(I.value=e[0]),t=new k({props:I}),v.push((()=>h(t,"value",q)));let C={placeholder:"Пароль",type:"password",name:"password",autocomplete:"on"};function _(t){e[7](t)}void 0!==e[1]&&(C.value=e[1]),s=new k({props:C}),v.push((()=>h(s,"value",S)));let z={placeholder:"Еще раз",type:"password",name:"password_confirmation",autocomplete:"on"};function A(t){e[8](t)}void 0!==e[2]&&(z.value=e[2]),m=new k({props:z}),v.push((()=>h(m,"value",_)));let B={type:"hidden",name:"authenticity_token"};return void 0!==e[3]&&(B.value=e[3]),x=new k({props:B}),v.push((()=>h(x,"value",A))),{c(){o(t.$$.fragment),a=r(),o(s.$$.fragment),l=r(),o(m.$$.fragment),y=r(),o(x.$$.fragment)},m(e,n){$(t,e,n),c(e,a,n),$(s,e,n),c(e,l,n),$(m,e,n),c(e,y,n),$(x,e,n),j=!0},p(e,a){const o={};!n&&1&a&&(n=!0,o.value=e[0],w((()=>n=!1))),t.$set(o);const r={};!u&&2&a&&(u=!0,r.value=e[1],w((()=>u=!1))),s.$set(r);const c={};!p&&4&a&&(p=!0,c.value=e[2],w((()=>p=!1))),m.$set(c);const $={};!b&&8&a&&(b=!0,$.value=e[3],w((()=>b=!1))),x.$set($)},i(e){j||(i(t.$$.fragment,e),i(s.$$.fragment,e),i(m.$$.fragment,e),i(x.$$.fragment,e),j=!0)},o(e){f(t.$$.fragment,e),f(s.$$.fragment,e),f(m.$$.fragment,e),f(x.$$.fragment,e),j=!1},d(e){g(t,e),e&&d(a),g(s,e),e&&d(l),g(m,e),e&&d(y),g(x,e)}}}function q(e){let t,n,v,h,w,y,x,k,q;return n=new b({props:{$$slots:{default:[j]},$$scope:{ctx:e}}}),y=new a({}),{c(){t=s("form"),o(n.$$.fragment),v=r(),h=s("button"),h.textContent="Войти",w=r(),o(y.$$.fragment),u(h,"class","btn btn-secondary"),u(t,"method","post"),u(t,"action","/api/v1/auth/register")},m(a,s){c(a,t,s),$(n,t,null),l(t,v),l(t,h),l(t,w),$(y,t,null),x=!0,k||(q=m(h,"click",p(e[4])),k=!0)},p(e,[t]){const a={};1039&t&&(a.$$scope={dirty:t,ctx:e}),n.$set(a)},i(e){x||(i(n.$$.fragment,e),i(y.$$.fragment,e),x=!0)},o(e){f(n.$$.fragment,e),f(y.$$.fragment,e),x=!1},d(e){e&&d(t),g(n),g(y),k=!1,q()}}}function I(e,t,n){let a,s,o,r=document.querySelector("meta[name=csrf-token]").content;return document.querySelector("meta[name=csrf-param]").content,[a,s,o,r,async function(e){let t=await y.register(a,s,o);t.errors?x.push(t.errors.join("<br />")):(y.signIn(t.token),x.push("Вы зарегистрировались "+t.data.email),window.location="/")},function(e){a=e,n(0,a)},function(e){s=e,n(1,s)},function(e){o=e,n(2,o)},function(e){r=e,n(3,r)}]}export default class extends e{constructor(e){super(),t(this,e,I,q,n,{})}}

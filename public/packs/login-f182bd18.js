import{S as t,i as e,s as n,v as a,e as s,o,w as r,x as u,d as c,p as l,y as $,l as i,z as m,t as f,f as p,h as d,q as g,A as v,B as h,C as w,U as y,D as x}from"./bundle.js";import{F as b,I as k}from"./Input-af104151.js";function j(t){let e,n,a,s,u,$,i,m,y;function x(e){t[4](e)}let b={placeholder:"Почта",type:"email",name:"email"};function j(e){t[5](e)}void 0!==t[0]&&(b.value=t[0]),e=new k({props:b}),v.push((()=>h(e,"value",x)));let q={placeholder:"Пароль",type:"password",name:"password",autocomplete:"on"};function I(e){t[6](e)}void 0!==t[1]&&(q.value=t[1]),s=new k({props:q}),v.push((()=>h(s,"value",j)));let S={type:"hidden",name:"authenticity_token"};return void 0!==t[2]&&(S.value=t[2]),i=new k({props:S}),v.push((()=>h(i,"value",I))),{c(){o(e.$$.fragment),a=r(),o(s.$$.fragment),$=r(),o(i.$$.fragment)},m(t,n){l(e,t,n),c(t,a,n),l(s,t,n),c(t,$,n),l(i,t,n),y=!0},p(t,a){const o={};!n&&1&a&&(n=!0,o.value=t[0],w((()=>n=!1))),e.$set(o);const r={};!u&&2&a&&(u=!0,r.value=t[1],w((()=>u=!1))),s.$set(r);const c={};!m&&4&a&&(m=!0,c.value=t[2],w((()=>m=!1))),i.$set(c)},i(t){y||(f(e.$$.fragment,t),f(s.$$.fragment,t),f(i.$$.fragment,t),y=!0)},o(t){p(e.$$.fragment,t),p(s.$$.fragment,t),p(i.$$.fragment,t),y=!1},d(t){g(e,t),t&&d(a),g(s,t),t&&d($),g(i,t)}}}function q(t){let e,n,v,h,w,y,x,k,q;return n=new b({props:{$$slots:{default:[j]},$$scope:{ctx:t}}}),y=new a({}),{c(){e=s("form"),o(n.$$.fragment),v=r(),h=s("button"),h.textContent="Войти",w=r(),o(y.$$.fragment),u(h,"class","btn btn-secondary"),u(e,"method","post"),u(e,"action","/api/v1/auth/sign_in")},m(a,s){c(a,e,s),l(n,e,null),$(e,v),$(e,h),$(e,w),l(y,e,null),x=!0,k||(q=i(h,"click",m(t[3])),k=!0)},p(t,[e]){const a={};263&e&&(a.$$scope={dirty:e,ctx:t}),n.$set(a)},i(t){x||(f(n.$$.fragment,t),f(y.$$.fragment,t),x=!0)},o(t){p(n.$$.fragment,t),p(y.$$.fragment,t),x=!1},d(t){t&&d(e),g(n),g(y),k=!1,q()}}}function I(t,e,n){let a,s,o=document.querySelector("meta[name=csrf-token]").content;return document.querySelector("meta[name=csrf-param]").content,[a,s,o,async function(t){let e=await y.login(a,s);e.errors?x.push(e.errors.join("<br />")):(y.signIn(e.token),x.push("Вошли как "+e.data.email),window.location="/")},function(t){a=t,n(0,a)},function(t){s=t,n(1,s)},function(t){o=t,n(2,o)}]}export default class extends t{constructor(t){super(),e(this,t,I,q,n,{})}}

{"version":3,"file":"login-80e34711.js","sources":["../../app/javascript/pages/login.svelte"],"sourcesContent":["<script>\nimport { User } from \"../store/user\";\n// TODO: Change to original package, after commit pull request https://github.com/hazg/svelte-toast/pull/2\nimport { SvelteToast, toast } from 'svelte-toast'\nimport { FormGroup, Input} from \"sveltestrap\";\n\nlet email, password\n\nlet csrf = document.querySelector('meta[name=csrf-token]').content\nlet param = document.querySelector('meta[name=csrf-param]').content\n\nasync function formSubmit(data){\n  let res = await User.login(email, password)\n  if(res.errors){\n    toast.push(res.errors.join('<br />'))\n  }else{\n    User.signIn(res.token)\n    toast.push('Вошли как '+res.data['email'])\n    window.location = '/'\n  }\n}\n\n</script>\n\n<form method='post' action=\"/api/v1/auth/sign_in\">\n  <FormGroup>\n    <Input placeholder=\"Почта\" type=\"email\" name=\"email\" bind:value={email} />\n    <Input placeholder=\"Пароль\" type=\"password\" name=\"password\" autocomplete=\"on\" bind:value={password} />\n    <Input type=\"hidden\" name=\"authenticity_token\" bind:value={csrf} />\n  </FormGroup>\n\n  <button on:click|preventDefault={formSubmit} class=\"btn btn-secondary\">\n    Войти\n  </button>\n  <SvelteToast />\n</form>"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;eA0BqE,GAAK;iCAAL,GAAK;;;;;;;;;;;;;;;;;kBACoB,GAAQ;oCAAR,GAAQ;;;;;;;;;;;;;;;cACvC,GAAI;gCAAJ,GAAI;;;;;;;;;;;;;;;;;;;;;;;;;;;qCAFE,GAAK;;;;;;;;;wCACoB,GAAQ;;;;;;;;;oCACvC,GAAI;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;yEAGhC,GAAU;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;KAzBzC,KAAK,EAAE,QAAA;KAEP,IAAI,GAAG,QAAQ,CAAC,aAAa,CAAC,uBAAuB,EAAE,OAAA;KACvD,KAAK,GAAG,QAAQ,CAAC,aAAa,CAAC,uBAAuB,EAAE,OAAA;;gBAE7C,UAAU,CAAC,IAAI;MACxB,GAAG,SAAS,IAAI,CAAC,KAAK,CAAC,KAAK,EAAE,QAAQ;;MACvC,GAAG,CAAC,MAAM;GACX,KAAK,CAAC,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,IAAI,CAAC,QAAQ;;GAEnC,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,KAAK;GACrB,KAAK,CAAC,IAAI,CAAC,YAAY,GAAC,GAAG,CAAC,IAAI,CAAC,OAAO;GACxC,MAAM,CAAC,QAAQ,GAAG,GAAE;;;;;;;;;;;EAQ6C,KAAK;;;;;EACoB,QAAQ;;;;;EACvC,IAAI;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;"}